@import "tailwindcss";

/* ============================================================
   MasjidConnect Design Tokens
   ============================================================ */
@theme {
  /* Primary palette */
  --color-midnight: #0A2647;
  --color-midnight-light: #144272;
  --color-midnight-dark: #061A33;

  /* Secondary palette */
  --color-emerald: #2A9D8F;
  --color-emerald-light: #3DBFAE;
  --color-emerald-dark: #1F7A6F;

  /* Accent palette */
  --color-gold: #E9C46A;
  --color-gold-light: #F0D48A;
  --color-gold-dark: #D4A84A;

  /* Neutral palette */
  --color-surface: rgba(255, 255, 255, 0.08);
  --color-surface-hover: rgba(255, 255, 255, 0.12);
  --color-surface-active: rgba(255, 255, 255, 0.16);
  --color-border: rgba(255, 255, 255, 0.12);
  --color-border-strong: rgba(255, 255, 255, 0.2);

  /* Text palette */
  --color-text-primary: #FFFFFF;
  --color-text-secondary: rgba(255, 255, 255, 0.7);
  --color-text-muted: rgba(255, 255, 255, 0.5);

  /* Alert palette */
  --color-alert-red: #E63946;
  --color-alert-orange: #F4A261;
  --color-alert-green: #2A9D8F;

  /* Fonts */
  --font-sans: 'Poppins', system-ui, -apple-system, sans-serif;
  --font-arabic: 'Amiri', 'Traditional Arabic', serif;

  /* Animation durations */
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
  --duration-crossfade: 700ms;
}

/* ============================================================
   Global Styles
   ============================================================
   Resolution-independent scaling: design reference 1280×720 (720p).
   Root font-size scales with viewport so all rem-based layout,
   spacing, and typography scale together (720p, 1080p, 4K).
   ============================================================ */
* {
  cursor: none !important;
}

html {
  /* Scale 1rem with viewport; vmin so landscape and portrait behave consistently */
  font-size: clamp(10px, calc(16px * (100vmin / 720)), 48px);
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: var(--color-midnight);
  color: var(--color-text-primary);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#root {
  width: 100%;
  height: 100%;
}

/* ============================================================
   Font Faces
   ============================================================ */
@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: local('Poppins Light'), local('Poppins-Light'),
       url('/fonts/poppins-light.woff2') format('woff2');
}

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Poppins Regular'), local('Poppins-Regular'),
       url('/fonts/poppins-regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: local('Poppins Medium'), local('Poppins-Medium'),
       url('/fonts/poppins-medium.woff2') format('woff2');
}

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Poppins SemiBold'), local('Poppins-SemiBold'),
       url('/fonts/poppins-semibold.woff2') format('woff2');
}

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Poppins Bold'), local('Poppins-Bold'),
       url('/fonts/poppins-bold.woff2') format('woff2');
}

@font-face {
  font-family: 'Amiri';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Amiri Regular'), local('Amiri-Regular'),
       url('/fonts/amiri-regular.woff2') format('woff2');
  unicode-range: U+0600-06FF, U+200C-200E, U+2010-2011, U+204F, U+2E41, U+FB50-FDFF, U+FE80-FEFC;
}

@font-face {
  font-family: 'Amiri';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Amiri Bold'), local('Amiri-Bold'),
       url('/fonts/amiri-bold.woff2') format('woff2');
  unicode-range: U+0600-06FF, U+200C-200E, U+2010-2011, U+204F, U+2E41, U+FB50-FDFF, U+FE80-FEFC;
}

/* ============================================================
   Utility Classes for GPU-friendly animations
   ============================================================ */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform, opacity;
  backface-visibility: hidden;
}

/* Crossfade animation for content carousel */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(0.5rem); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-0.5rem); }
}

.animate-fade-in {
  animation: fadeIn var(--duration-crossfade) ease-out forwards;
}

.animate-fade-out {
  animation: fadeOut var(--duration-crossfade) ease-in forwards;
}

/* Subtle pulse for active prayer time */
@keyframes subtlePulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.85; }
}

.animate-subtle-pulse {
  animation: subtlePulse 3s ease-in-out infinite;
}

/* Slide-in from right */
@keyframes slideInRight {
  from { opacity: 0; transform: translateX(1.5rem); }
  to   { opacity: 1; transform: translateX(0); }
}

.animate-slide-in-right {
  animation: slideInRight var(--duration-slow) ease-out forwards;
}

/* Scale-in (for modals / overlays) */
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to   { opacity: 1; transform: scale(1); }
}

.animate-scale-in {
  animation: scaleIn var(--duration-normal) ease-out forwards;
}

/* Countdown ticker */
@keyframes countdownTick {
  0%   { transform: translateY(0); opacity: 1; }
  50%  { transform: translateY(-0.25rem); opacity: 0.6; }
  100% { transform: translateY(0); opacity: 1; }
}

.animate-countdown-tick {
  animation: countdownTick 1s ease-in-out;
}

/* Stable-width countdown text — prevents layout shift as digits change.
   Uses tabular-nums so every digit occupies the same width, plus a
   min-width in `ch` units sized for the widest common format (XXm XXs). */
.countdown-stable {
  font-variant-numeric: tabular-nums;
  font-feature-settings: 'tnum';
  display: inline-block;
  min-width: 8ch;
  text-align: center;
}

/* Shimmer loading placeholder */
@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.animate-shimmer {
  background: linear-gradient(
    90deg,
    var(--color-surface) 25%,
    var(--color-surface-hover) 50%,
    var(--color-surface) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

/* ============================================================
   Arabic text helpers
   ============================================================ */
.arabic-text {
  font-family: var(--font-arabic);
  direction: rtl;
  text-align: right;
  line-height: 1.8;
}

/* ============================================================
   Component Base Classes
   Reusable building blocks for the display UI.
   These use GPU-safe properties only.
   ============================================================ */

/* Glass-free card (no backdrop-filter, RPi-safe) */
.card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 1rem;
  padding: 1.5rem;
}

.card-elevated {
  background: rgba(10, 38, 71, 0.85);
  border: 1px solid var(--color-border-strong);
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
}

/* Panel — larger card for main content sections */
.panel {
  background: rgba(10, 38, 71, 0.6);
  border: 1px solid var(--color-border);
  border-radius: 1.25rem;
  padding: 2rem;
}

/* Badge / pill */
.badge {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.badge-emerald {
  background: rgba(42, 157, 143, 0.2);
  color: var(--color-emerald-light);
  border: 1px solid rgba(42, 157, 143, 0.3);
}

.badge-gold {
  background: rgba(233, 196, 106, 0.2);
  color: var(--color-gold);
  border: 1px solid rgba(233, 196, 106, 0.3);
}

.badge-red {
  background: rgba(230, 57, 70, 0.2);
  color: var(--color-alert-red);
  border: 1px solid rgba(230, 57, 70, 0.3);
}

/* Divider */
.divider {
  height: 1px;
  background: var(--color-border);
  border: none;
  margin: 1rem 0;
}

/* ============================================================
   Emergency alert overlay
   ============================================================ */

/* Full-viewport backdrop — solid so the display behind is fully hidden */
.emergency-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-midnight-dark);
  opacity: 1;
  transition: opacity 400ms ease-out;
  /* Ensure nothing bleeds through */
  isolation: isolate;
}

.emergency-overlay.fade-out {
  opacity: 0;
  transition: opacity 300ms ease-in;
}

/* Animated card */
@keyframes alertSlideIn {
  from { opacity: 0; transform: translateY(1rem) scale(0.96); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes alertGlow {
  0%, 100% { box-shadow: 0 0 40px var(--alert-glow, rgba(230,57,70,0.25)); }
  50%      { box-shadow: 0 0 70px var(--alert-glow, rgba(230,57,70,0.4)); }
}

.alert-card {
  animation: alertSlideIn 0.5s ease-out, alertGlow 3s ease-in-out 0.6s infinite;
  background: rgba(10, 38, 71, 0.85);
  border: 1px solid var(--color-border-strong);
  border-radius: 1.25rem;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  width: 88%;
  max-width: 60rem;
  max-height: 88%;
}

/* Top accent stripe — the only strong colour hit */
.alert-card::before {
  content: '';
  display: block;
  height: 5px;
  flex-shrink: 0;
  background: var(--alert-accent, var(--color-alert-red));
}

/* Colour-scheme accent variables */
.alert-scheme-red    { --alert-accent: #E63946; --alert-glow: rgba(230,57,70,0.3);  }
.alert-scheme-orange { --alert-accent: #F4A261; --alert-glow: rgba(244,162,97,0.3); }
.alert-scheme-amber  { --alert-accent: #E9C46A; --alert-glow: rgba(233,196,106,0.3);}
.alert-scheme-blue   { --alert-accent: #4895EF; --alert-glow: rgba(72,149,239,0.3); }
.alert-scheme-green  { --alert-accent: #2A9D8F; --alert-glow: rgba(42,157,143,0.3); }
.alert-scheme-purple { --alert-accent: #9B5DE5; --alert-glow: rgba(155,93,229,0.3); }
.alert-scheme-dark   { --alert-accent: #78909C; --alert-glow: rgba(120,144,156,0.3);}

/* Solid scheme-tinted backgrounds — fully opaque so content behind is hidden */
.alert-bg-red    { background: #0d1c2e; }
.alert-bg-orange { background: #0d1c2e; }
.alert-bg-amber  { background: #0d1c2e; }
.alert-bg-blue   { background: #0d1c2e; }
.alert-bg-green  { background: #0d1c2e; }
.alert-bg-purple { background: #0d1c2e; }
.alert-bg-dark   { background: #0d1c2e; }

/* Scrollbar hidden (for carousel-style content) */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* ============================================================
   Typography utilities (rem-only so they scale with root)
   ============================================================ */
.text-display {
  font-size: clamp(2rem, 3.5rem, 4rem);
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.02em;
}

.text-heading {
  font-size: clamp(1.25rem, 1.75rem, 2rem);
  font-weight: 600;
  line-height: 1.2;
}

.text-subheading {
  font-size: clamp(0.9rem, 1.1rem, 1.25rem);
  font-weight: 500;
  line-height: 1.3;
}

.text-body {
  font-size: clamp(0.8rem, 0.95rem, 1rem);
  font-weight: 400;
  line-height: 1.6;
}

.text-caption {
  font-size: clamp(0.65rem, 0.75rem, 0.85rem);
  font-weight: 400;
  line-height: 1.4;
  color: var(--color-text-secondary);
}

/* ============================================================
   Layout utilities
   ============================================================ */
.fullscreen {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* ============================================================
   Ramadan Mode Theme
   ============================================================
   When [data-theme="ramadan"] is set on <html>, override
   the design tokens with a green-and-gold palette. All Tailwind
   utilities (bg-midnight, text-emerald, text-gold, etc.)
   automatically resolve to the Ramadan values.
   ============================================================ */
[data-theme="ramadan"] {
  /* Primary palette → deep forest green */
  --color-midnight: #0D3B2E;
  --color-midnight-light: #1B5E3A;
  --color-midnight-dark: #0A2A1E;

  /* Secondary palette → warm gold (was teal) */
  --color-emerald: #D4A84A;
  --color-emerald-light: #E9C46A;
  --color-emerald-dark: #B8922F;

  /* Accent palette → lighter gold highlights */
  --color-gold: #F0D48A;
  --color-gold-light: #F5E0A8;
  --color-gold-dark: #E9C46A;

  /* Slightly dimmer surface for green bg contrast */
  --color-surface: rgba(255, 255, 255, 0.06);
  --color-surface-hover: rgba(255, 255, 255, 0.10);
  --color-surface-active: rgba(255, 255, 255, 0.14);
}

/* Override hardcoded rgba(10,38,71,...) backgrounds used in
   .card-elevated, .panel, and .alert-card with green equivalents */
[data-theme="ramadan"] .card-elevated {
  background: rgba(13, 59, 46, 0.85);
}

[data-theme="ramadan"] .panel {
  background: rgba(13, 59, 46, 0.6);
}

[data-theme="ramadan"] .alert-card {
  background: rgba(13, 59, 46, 0.85);
}

/* Alert overlay backgrounds → green-tinted */
[data-theme="ramadan"] .alert-bg-red,
[data-theme="ramadan"] .alert-bg-orange,
[data-theme="ramadan"] .alert-bg-amber,
[data-theme="ramadan"] .alert-bg-blue,
[data-theme="ramadan"] .alert-bg-green,
[data-theme="ramadan"] .alert-bg-purple,
[data-theme="ramadan"] .alert-bg-dark {
  background: #0a2a1e;
}

/* Badge overrides — use Ramadan gold tints */
[data-theme="ramadan"] .badge-emerald {
  background: rgba(212, 168, 74, 0.2);
  color: var(--color-emerald-light);
  border-color: rgba(212, 168, 74, 0.3);
}

/* Iftar countdown glow animation (Ramadan-only) */
@keyframes iftarGlow {
  0%, 100% { box-shadow: 0 0 30px rgba(212, 168, 74, 0.15); }
  50%      { box-shadow: 0 0 50px rgba(212, 168, 74, 0.3); }
}

.iftar-countdown-card {
  animation: iftarGlow 4s ease-in-out infinite;
}
