@import "tailwindcss";

/* Amiri Arabic subset (includes U+FDFA ﷺ) — self-hosted via @fontsource */
@import "@fontsource/amiri/arabic-400.css";
@import "@fontsource/amiri/arabic-700.css";

/* ============================================================
   MasjidConnect Design Tokens
   ============================================================ */
@theme {
  /* Primary palette */
  --color-midnight: #0A2647;
  --color-midnight-light: #144272;
  --color-midnight-dark: #061A33;

  /* Secondary palette */
  --color-emerald: #2A9D8F;
  --color-emerald-light: #3DBFAE;
  --color-emerald-dark: #1F7A6F;

  /* Accent palette */
  --color-gold: #E9C46A;
  --color-gold-light: #F0D48A;
  --color-gold-dark: #D4A84A;

  /* Neutral palette */
  --color-surface: rgba(255, 255, 255, 0.08);
  --color-surface-hover: rgba(255, 255, 255, 0.12);
  --color-surface-active: rgba(255, 255, 255, 0.16);
  --color-border: rgba(255, 255, 255, 0.12);
  --color-border-strong: rgba(255, 255, 255, 0.2);

  /* Text palette */
  --color-text-primary: #FFFFFF;
  --color-text-secondary: rgba(255, 255, 255, 0.7);
  --color-text-muted: rgba(255, 255, 255, 0.5);

  /* Alert palette */
  --color-alert-red: #E63946;
  --color-alert-orange: #F4A261;
  --color-alert-green: #2A9D8F;

  /* Content type: Dua (calm blue per PRD) */
  --color-dua: #1565C0;
  --color-dua-light: #42A5F5;

  /* Fonts — Amiri as fallback so ﷺ (U+FDFA) and other Arabic glyphs render on RPi when text uses Poppins */
  --font-sans: 'Poppins', 'Amiri', system-ui, -apple-system, sans-serif;
  --font-arabic: 'Amiri', 'Traditional Arabic', serif;

  /* Animation durations */
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
  --duration-crossfade: 700ms;
}

/* ============================================================
   Global Styles
   ============================================================
   Resolution-independent scaling: design reference 1280×720 (720p).
   Root font-size scales with viewport so all rem-based layout,
   spacing, and typography scale together (720p, 1080p, 4K).
   ============================================================ */
* {
  cursor: none !important;
}

html {
  /* Scale 1rem with viewport; vmin so landscape and portrait behave consistently */
  font-size: clamp(10px, calc(16px * (100vmin / 720)), 48px);
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: var(--color-midnight);
  color: var(--color-text-primary);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#root {
  width: 100%;
  height: 100%;
}

/* ============================================================
   Font Faces
   ============================================================ */
@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: local('Poppins Light'), local('Poppins-Light'),
       url('/fonts/poppins-light.woff2') format('woff2');
}

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Poppins Regular'), local('Poppins-Regular'),
       url('/fonts/poppins-regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: local('Poppins Medium'), local('Poppins-Medium'),
       url('/fonts/poppins-medium.woff2') format('woff2');
}

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Poppins SemiBold'), local('Poppins-SemiBold'),
       url('/fonts/poppins-semibold.woff2') format('woff2');
}

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Poppins Bold'), local('Poppins-Bold'),
       url('/fonts/poppins-bold.woff2') format('woff2');
}

/* Amiri: loaded via @fontsource/amiri (Arabic subset) above for full Arabic + U+FDFA ﷺ support on RPi */

/* ============================================================
   Utility Classes for GPU-friendly animations
   ============================================================ */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform, opacity;
  backface-visibility: hidden;
}

/* Crossfade animation for content carousel */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(0.5rem); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-0.5rem); }
}

.animate-fade-in {
  animation: fadeIn var(--duration-crossfade) ease-out forwards;
}

.animate-fade-out {
  animation: fadeOut var(--duration-crossfade) ease-in forwards;
}

/* Subtle pulse for active prayer time */
@keyframes subtlePulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.85; }
}

.animate-subtle-pulse {
  animation: subtlePulse 3s ease-in-out infinite;
}

/* Slide-in from right */
@keyframes slideInRight {
  from { opacity: 0; transform: translateX(1.5rem); }
  to   { opacity: 1; transform: translateX(0); }
}

.animate-slide-in-right {
  animation: slideInRight var(--duration-slow) ease-out forwards;
}

/* Scale-in (for modals / overlays) */
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to   { opacity: 1; transform: scale(1); }
}

.animate-scale-in {
  animation: scaleIn var(--duration-normal) ease-out forwards;
}

/* Countdown ticker */
@keyframes countdownTick {
  0%   { transform: translateY(0); opacity: 1; }
  50%  { transform: translateY(-0.25rem); opacity: 0.6; }
  100% { transform: translateY(0); opacity: 1; }
}

.animate-countdown-tick {
  animation: countdownTick 1s ease-in-out;
}

/* Stable-width countdown text — prevents layout shift as digits change.
   Uses tabular-nums so every digit occupies the same width, plus a
   min-width in `ch` units sized for the widest common format (XXm XXs). */
.countdown-stable {
  font-variant-numeric: tabular-nums;
  font-feature-settings: 'tnum';
  display: inline-block;
  min-width: 8ch;
  text-align: center;
}

/* Shimmer loading placeholder */
@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.animate-shimmer {
  background: linear-gradient(
    90deg,
    var(--color-surface) 25%,
    var(--color-surface-hover) 50%,
    var(--color-surface) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

/* ============================================================
   Arabic text helpers
   ============================================================ */
.arabic-text {
  font-family: var(--font-arabic);
  direction: rtl;
  text-align: right;
  line-height: 1.8;
}

/* ============================================================
   Component Base Classes
   Reusable building blocks for the display UI.
   These use GPU-safe properties only.
   ============================================================ */

/* Glass-free card (no backdrop-filter, RPi-safe). Borderless for display readability. */
.card {
  background: var(--color-surface);
  border-radius: 1rem;
  padding: 1.5rem;
}

.card-elevated {
  background: rgba(10, 38, 71, 0.85);
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
}

/* Panel — larger card for main content sections. Borderless for display readability. */
.panel {
  background: rgba(10, 38, 71, 0.6);
  border-radius: 1.25rem;
  padding: 2rem;
}

/* Badge / pill */
.badge {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.badge-emerald {
  background: rgba(42, 157, 143, 0.2);
  color: var(--color-emerald-light);
  border: 1px solid rgba(42, 157, 143, 0.3);
}

.badge-gold {
  background: rgba(233, 196, 106, 0.2);
  color: var(--color-gold);
  border: 1px solid rgba(233, 196, 106, 0.3);
}

.badge-red {
  background: rgba(230, 57, 70, 0.2);
  color: var(--color-alert-red);
  border: 1px solid rgba(230, 57, 70, 0.3);
}

.badge-dua {
  background: rgba(21, 101, 192, 0.2);
  color: var(--color-dua-light);
  border: 1px solid rgba(21, 101, 192, 0.4);
}

/* Divider */
.divider {
  height: 1px;
  background: var(--color-border);
  border: none;
  margin: 1rem 0;
}

/* ============================================================
   Emergency alert overlay
   Full-screen takeover — category colour background, three zones.
   ============================================================ */

/* Entry: fast fade-in + subtle scale-up (urgent information) */
@keyframes emergency-enter {
  from {
    opacity: 0;
    transform: scale(1.03);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Exit: fade-out only (no scale — avoids "hiding" read) */
@keyframes emergency-exit {
  from { opacity: 1; }
  to   { opacity: 0; }
}

/* Critical urgency: pulsing red glow on the overlay border */
@keyframes emergency-pulse {
  0%   { box-shadow: 0 0 0 0    rgba(211, 47, 47, 0.8); }
  70%  { box-shadow: 0 0 0 24px rgba(211, 47, 47, 0);   }
  100% { box-shadow: 0 0 0 0    rgba(211, 47, 47, 0);   }
}

/* Base overlay — covers 100vw × 100vh, always on top */
.emergency-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: emergency-enter 0.3s ease-out forwards;
  isolation: isolate;
}

/* Urgency variants */
.emergency-overlay--critical {
  animation: emergency-enter 0.3s ease-out forwards,
             emergency-pulse 1.5s ease-in-out 0.3s infinite;
  border: 4px solid rgba(255, 255, 255, 0.6);
}

.emergency-overlay--high {
  border: 3px solid rgba(255, 255, 255, 0.4);
  box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
}

.emergency-overlay--medium {
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
}

/* Exit state — trigger 400ms before unmounting */
.emergency-overlay--exiting {
  animation: emergency-exit 0.4s ease-in forwards !important;
}

/* Zone tint bar (header + footer darkened overlay) */
.emergency-zone-tint {
  background: rgba(0, 0, 0, 0.25);
}

/*
 * Emergency overlay typography — vw-based so the overlay fills the screen
 * at any resolution (these are intentionally vw, not rem; the overlay is a
 * full-screen takeover where the standard rem-scaling approach doesn't apply).
 */
.emergency-category-label {
  font-size: 1.4vw;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  line-height: 1;
}

.emergency-title {
  font-size: 4.5vw;
  line-height: 1.3;
}

.emergency-message {
  font-size: 2.2vw;
  line-height: 1.5;
}

.emergency-countdown {
  font-size: 1.6vw;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  font-feature-settings: 'tnum';
  font-family: ui-monospace, 'Courier New', monospace;
}

.emergency-footer-text {
  font-size: 1.1vw;
  font-weight: 400;
  line-height: 1;
}

/* Scrollbar hidden (for carousel-style content) */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* ============================================================
   Typography utilities (rem-only so they scale with root)
   ============================================================ */
/* Clock — scales with viewport; proportional to header. No glow/shadow for display clarity. */
.text-clock {
  font-size: clamp(2rem, 3.25rem, 4.5rem);
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.02em;
  font-variant-numeric: tabular-nums;
  font-feature-settings: 'tnum';
  text-shadow: none;
}

.text-prayer {
  font-size: clamp(1.5rem, 2rem, 2.5rem);
  font-weight: 500;
  line-height: 1.3;
}

/* Denser prayer times for landscape so full list + legend fit without overflow */
.text-prayer-dense {
  font-size: clamp(1rem, 1.35rem, 1.6rem);
  font-weight: 500;
  line-height: 1.25;
}

/* Carousel title — kept smaller so long verses fit without clipping */
.text-carousel-title {
  font-size: clamp(1rem, 1.5rem, 1.9rem);
  font-weight: 600;
  line-height: 1.2;
}

/* Carousel body — smaller so Ayatul Kursi etc. fit in available space */
.text-carousel-body {
  font-size: clamp(0.85rem, 1.05rem, 1.25rem);
  font-weight: 400;
  line-height: 1.55;
}

/* Carousel Arabic — prominent but reduced so it fits with translation */
.text-carousel-arabic {
  font-size: clamp(1.2rem, 1.6rem, 2.1rem);
  font-weight: 400;
  line-height: 1.55;
}

.text-display {
  font-size: clamp(2rem, 3.5rem, 4rem);
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.02em;
}

.text-heading {
  font-size: clamp(1.25rem, 1.75rem, 2rem);
  font-weight: 600;
  line-height: 1.2;
}

.text-subheading {
  font-size: clamp(0.9rem, 1.1rem, 1.25rem);
  font-weight: 500;
  line-height: 1.3;
}

.text-body {
  font-size: clamp(0.9rem, 1.05rem, 1.15rem);
  font-weight: 400;
  line-height: 1.6;
}

.text-body.font-semibold {
  font-weight: 600;
}

.text-caption {
  font-size: clamp(0.75rem, 0.85rem, 0.95rem);
  font-weight: 400;
  line-height: 1.4;
  color: var(--color-text-secondary);
}

/* ============================================================
   Layout utilities
   ============================================================ */
.fullscreen {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* ============================================================
   Ramadan Mode Theme
   ============================================================
   When [data-theme="ramadan"] is set on <html>, override
   the design tokens with a green-and-gold palette. All Tailwind
   utilities (bg-midnight, text-emerald, text-gold, etc.)
   automatically resolve to the Ramadan values.
   ============================================================ */
[data-theme="ramadan"] {
  /* Primary palette → deep forest green */
  --color-midnight: #0D3B2E;
  --color-midnight-light: #1B5E3A;
  --color-midnight-dark: #0A2A1E;

  /* Secondary palette → warm gold (was teal) */
  --color-emerald: #D4A84A;
  --color-emerald-light: #E9C46A;
  --color-emerald-dark: #B8922F;

  /* Accent palette → lighter gold highlights */
  --color-gold: #F0D48A;
  --color-gold-light: #F5E0A8;
  --color-gold-dark: #E9C46A;

  /* Slightly dimmer surface for green bg contrast */
  --color-surface: rgba(255, 255, 255, 0.06);
  --color-surface-hover: rgba(255, 255, 255, 0.10);
  --color-surface-active: rgba(255, 255, 255, 0.14);
}

/* Override hardcoded rgba(10,38,71,...) backgrounds used in
   .card-elevated and .panel with green equivalents */
[data-theme="ramadan"] .card-elevated {
  background: rgba(13, 59, 46, 0.85);
}

[data-theme="ramadan"] .panel {
  background: rgba(13, 59, 46, 0.6);
}

/* Badge overrides — use Ramadan gold tints */
[data-theme="ramadan"] .badge-emerald {
  background: rgba(212, 168, 74, 0.2);
  color: var(--color-emerald-light);
  border-color: rgba(212, 168, 74, 0.3);
}

/* Iftar/Ramadan countdown card — no glow for display clarity. */
.iftar-countdown-card {
  /* Previously had iftarGlow animation; removed per display-only design. */
}

/* Countdown container — border and subtle background so countdown reads as a card. */
.countdown-container {
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.06);
  border-radius: 0.5rem;
}
