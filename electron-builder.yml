# Electron Builder Configuration Override
# This file provides additional configuration for electron-builder
# to ensure proper RPI builds

appId: com.masjidconnect.display
productName: masjidconnect-display
directories:
  buildResources: assets
  output: dist
  app: .

# Linux/Debian specific configuration
linux:
  target:
    - target: deb
      arch:
        - armv7l
        - arm64
  category: Utility
  executableName: masjidconnect-display
  artifactName: masjidconnect-display-${version}-${arch}.${ext}
  synopsis: Digital signage display for mosques
  description: MasjidConnect Display App for showing prayer times and announcements
  maintainer: MasjidConnect <support@masjidconnect.com>
  vendor: MasjidConnect
  packageCategory: utils

deb:
  afterInstall: after-install.sh
  afterRemove: after-remove.sh
  depends:
    - libasound2 (>= 1.1.3)
    - libatk-bridge2.0-0
    - libatk1.0-0
    - libatspi2.0-0
    - libcups2
    - libdrm2
    - libgbm1
    - libgtk-3-0
    - libnotify4
    - libnss3
    - libx11-xcb1
    - libxcb-dri3-0
    - libxcomposite1
    - libxdamage1
    - libxfixes3
    - libxkbcommon0
    - libxrandr2
    - libxss1
    - libxtst6
    - libuuid1
    - xdg-utils
  fpm:
    - "--deb-no-default-config-files"
    - "--deb-changelog"
    - "--before-install=after-install.sh"
    - "--after-install=after-install.sh"
    - "--after-remove=after-remove.sh"

# Publish configuration
publish:
  provider: github
  owner: masjidSolutions
  repo: masjidconnect-display-app
  releaseType: release
  private: false

